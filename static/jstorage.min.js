(function(g){function m(){if(e.jStorage)try{b=o(String(e.jStorage))}catch(a){e.jStorage="{}"}else e.jStorage="{}";j=e.jStorage?String(e.jStorage).length:0}function h(){try{e.jStorage=p(b),c&&(c.setAttribute("jStorage",e.jStorage),c.save("jStorage")),j=e.jStorage?String(e.jStorage).length:0}catch(a){}}function i(a){if(!a||typeof a!="string"&&typeof a!="number")throw new TypeError("Key name must be string or numeric");if(a=="__jstorage_meta")throw new TypeError("Reserved key name");return true}function k(){var a,
d,c,e=Infinity,f=false;clearTimeout(n);if(b.__jstorage_meta&&typeof b.__jstorage_meta.TTL=="object"){a=+new Date;c=b.__jstorage_meta.TTL;for(d in c)c.hasOwnProperty(d)&&(c[d]<=a?(delete c[d],delete b[d],f=true):c[d]<e&&(e=c[d]));e!=Infinity&&(n=setTimeout(k,e-a));f&&h()}}if(!g||!g.toJSON&&!Object.toJSON&&!window.JSON)throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var b={},e={jStorage:"{}"},c=null,j=0,p=g.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),
o=g.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()},f=false,n,l={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false},encode:function(a){if(!this.isXML(a))return false;try{return(new XMLSerializer).serializeToString(a)}catch(d){try{return a.xml}catch(b){}}return false},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");
b.async="false";b.loadXML(a);return b};if(!b)return false;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:false}};g.jStorage={version:"0.1.6.0",set:function(a,d){i(a);l.isXML(d)&&(d={_is_xml:true,xml:l.encode(d)});b[a]=d;h();return d},get:function(a,d){i(a);return a in b?b[a]&&typeof b[a]=="object"&&b[a]._is_xml&&b[a]._is_xml?l.decode(b[a].xml):b[a]:typeof d=="undefined"?null:d},deleteKey:function(a){i(a);return a in b?(delete b[a],b.__jstorage_meta&&typeof b.__jstorage_meta.TTL==
"object"&&a in b.__jstorage_meta.TTL&&delete b.__jstorage_meta.TTL[a],h(),true):false},setTTL:function(a,d){var c=+new Date;i(a);d=Number(d)||0;if(a in b){if(!b.__jstorage_meta)b.__jstorage_meta={};if(!b.__jstorage_meta.TTL)b.__jstorage_meta.TTL={};d>0?b.__jstorage_meta.TTL[a]=c+d:delete b.__jstorage_meta.TTL[a];h();k();return true}return false},flush:function(){b={};h();return true},storageObj:function(){function a(){}a.prototype=b;return new a},index:function(){var a=[],c;for(c in b)b.hasOwnProperty(c)&&
c!="__jstorage_meta"&&a.push(c);return a},storageSize:function(){return j},currentBackend:function(){return f},storageAvailable:function(){return!!f},reInit:function(){var a;if(c&&c.addBehavior){a=document.createElement("link");c.parentNode.replaceChild(a,c);c=a;c.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(c);c.load("jStorage");a="{}";try{a=c.getAttribute("jStorage")}catch(b){}e.jStorage=a;f="userDataBehavior"}m()}};(function(){var a=false;if("localStorage"in
window)try{window.localStorage.setItem("_tmptest","tmpval"),a=true,window.localStorage.removeItem("_tmptest")}catch(b){}if(a)try{if(window.localStorage)e=window.localStorage,f="localStorage"}catch(g){}else if("globalStorage"in window)try{window.globalStorage&&(e=window.globalStorage[window.location.hostname],f="globalStorage")}catch(h){}else if(c=document.createElement("link"),c.addBehavior){c.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(c);c.load("jStorage");
a="{}";try{a=c.getAttribute("jStorage")}catch(i){}e.jStorage=a;f="userDataBehavior"}else{c=null;return}m();k()})()})(window.jQuery||window.$);